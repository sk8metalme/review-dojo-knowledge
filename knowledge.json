{
  "knowledge_items": [
    {
      "category": "design",
      "language": "github-actions",
      "severity": "warning",
      "title": "GitHub Actions: peter-evans/repository-dispatch v4 アップグレード時のランナーバージョン要件",
      "summary": "peter-evans/repository-dispatch@v4 にアップグレードする際、self-hosted ランナーを使用している場合は Actions Runner v2.327.1 以上が必須（Node 24 サポート対応）。GitHub ホストランナーの場合は影響なし。",
      "recommendation": "self-hosted ランナーを使用する場合は Actions Runner v2.327.1 以上にアップグレードすること。コア入力（token、repository、event-type、client-payload）に変更はないため、その他の互換性問題はない。",
      "code_example": {
        "bad": "# v2 から v4 にアップグレード時、self-hosted ランナーのバージョンを確認していない\nuses: peter-evans/repository-dispatch@v4",
        "good": "# v4 にアップグレード前に self-hosted ランナーを v2.327.1+ に更新\n# または GitHub ホストランナーを使用\nuses: peter-evans/repository-dispatch@v4\n# runs-on: ubuntu-latest # GitHub ホストランナーの場合は問題なし"
      },
      "file_path": ".github/workflows/trigger-knowledge-collection.yml",
      "pr_url": "https://github.com/sk8metalme/review-dojo-knowledge/pull/3",
      "original_comment": "peter-evans/repository-dispatch@v4 へのアップグレードを確認してください。\n\nv4 アップグレードは適切ですが、以下のブレーキングチェンジに対応が必要です：\n\n- **self-hosted ランナー利用時**: Actions Runner v2.327.1 以上が必須です (Node 24 サポート対応)。このワークフローが self-hosted ランナーで実行される場合は、ランナーのバージョンアップを確認してください。\n- コア入力（token、repository、event-type、client-payload）に変更はありませんので、その他の互換性への影響はありません。\n\nGitHub ホストランナーの場合はこのアップグレードは安全です。"
    },
    {
      "category": "readability",
      "language": "markdown",
      "severity": "info",
      "title": "Markdownドキュメントでコードブロックに言語指定を追加",
      "summary": "フェンスコードブロック（```）に言語指定がないとシンタックスハイライトが適用されず、可読性が低下する。markdownlint MD040ルール違反。",
      "recommendation": "すべてのコードブロックに適切な言語識別子（bash, json, text, plaintext等）を指定する。",
      "code_example": {
        "bad": "```\nnpm run lint\nnpm run test\n```",
        "good": "```bash\nnpm run lint\nnpm run test\n```"
      },
      "file_path": "CLAUDE.md",
      "pr_url": "https://github.com/sk8metalme/nodejs-study/pull/8",
      "original_comment": "markdownlint（MD040）によると、フェンスコードブロックに言語仕様が指定されていません。コマンド例の場合は`bash`を追加しください。"
    },
    {
      "category": "readability",
      "language": "markdown",
      "severity": "info",
      "title": "Markdownで強調の代わりに見出し構造を使用",
      "summary": "太字強調（**text**）を見出しの代わりに使用すると、文書構造が不明確になり、アクセシビリティツールが正しく解釈できない。markdownlint MD036ルール違反。",
      "recommendation": "セクションタイトルには強調ではなく適切な見出しレベル（###等）を使用する。",
      "code_example": {
        "bad": "**注意: 手動公開は非推奨（CI経由を推奨）**",
        "good": "### 注意\n\n手動公開は非推奨です。CI経由の公開を推奨します。"
      },
      "file_path": "CLAUDE.md",
      "pr_url": "https://github.com/sk8metalme/nodejs-study/pull/8",
      "original_comment": "「注意」セクションは、強調（`**...**`）ではなく見出し（`###`）で表現すると、ドキュメント構造がより明確になります。markdownlint（MD036）の推奨に従ってください。"
    },
    {
      "category": "readability",
      "language": "markdown",
      "severity": "info",
      "title": "マークダウン：強調記号の代わりにヘッディングを使用",
      "summary": "ドキュメント構造を改善するため、強調記号 (**...**) の代わりにマークダウンヘッディング (###) を使用する",
      "recommendation": "セクションタイトルには強調記号ではなく適切なレベルのマークダウンヘッディングを使用し、目次生成やアウトライン表示を可能にする",
      "code_example": {
        "bad": "**計画フェーズ（SDD: 仕様駆動開発）**",
        "good": "### 計画フェーズ（SDD: 仕様駆動開発）"
      },
      "file_path": ".claude/CLAUDE.md",
      "pr_url": "https://github.com/sk8metalme/ai-agent-setup/pull/1",
      "original_comment": "MD036規則により、強調記号 `**...**` の代わりに、マークダウンヘッディング (`###`) を使用してください。これにより、ドキュメント構造が改善され、目次生成やアウトライン表示が可能になります。"
    },
    {
      "category": "readability",
      "language": "markdown",
      "severity": "info",
      "title": "Markdownリンクフラグメントは見出しと一致させる",
      "summary": "README内の内部リンクのフラグメント識別子が実際の見出しと一致していなかった。markdownlint MD051ルール違反。",
      "recommendation": "内部リンクのフラグメントは、実際の見出しのslugと完全に一致させる必要があります。見出しに番号プレフィックス（例: '1.'）がある場合、フラグメントにも含める必要があります",
      "code_example": {
        "bad": "[グローバル設定](#-グローバル設定のインストール)\n// 実際の見出し: ### 1. グローバル設定のインストール",
        "good": "[グローバル設定](#1-グローバル設定のインストール)\n// 実際の見出し: ### 1. グローバル設定のインストール"
      },
      "file_path": "README.md",
      "pr_url": "https://github.com/sk8metalme/ai-agent-setup/pull/35",
      "original_comment": "Line 9のリンク`#-グローバル設定のインストール`は、Line 169の実際の見出し`### 1. グローバル設定のインストール`と一致しません。番号プレフィックスが欠落しています。"
    },
    {
      "category": "design",
      "language": "markdown",
      "severity": "warning",
      "title": "Claude Code plugin.json仕様の命名規則とキー不足の修正",
      "summary": "plugin.jsonのサポートキー表が公式Claude仕様と不一致。`skills`を`commands`に修正が必要。`mcpServers`はキャメルケース表記にすべき。また`homepage`、`category`、`tags`、`strict`などのサポート済みキーが表から漏落している。",
      "recommendation": "公式仕様に従い、以下を修正：1) `skills`→`commands`（コマンドマークダウンファイルへのパスまたはパス配列）、2) `mcp_servers`→`mcpServers`（キャメルケース）、3) 漏落キーの追加：`homepage`（ドキュメント/プロジェクトURL）、`category`/`tags`（マーケットプレイス検索フィールド）、`strict`（マニフェスト検証の強制設定フラグ）",
      "code_example": {
        "bad": "| skills | スキル定義 | いいえ |\n| mcp_servers | MCPサーバー設定 | いいえ |",
        "good": "| commands | コマンドマークダウンファイルへのパスまたはパス配列 | いいえ |\n| mcpServers | MCPサーバー設定（キャメルケース） | いいえ |\n| homepage | ドキュメント/プロジェクトURL | いいえ |\n| category | マーケットプレイスカテゴリ | いいえ |\n| tags | 検索タグ配列 | いいえ |\n| strict | マニフェスト検証強制フラグ | いいえ |"
      },
      "file_path": "CLAUDE.md",
      "pr_url": "https://github.com/sk8metalme/dotfiles/pull/20",
      "original_comment": "プラグイン定義表の複数の不足および命名一貫性の問題を修正してください。\n\n公式のClaudeプラグイン仕様と比較すると、サポートキー表に以下の問題があります：\n\n- `skills`は`commands`に修正する必要があります（コマンドファイルへのパスまたはパス配列を指定）\n- 以下のサポート済みキーが表から漏落しています：`homepage`（ドキュメント/プロジェクトURL）、`category`/`tags`（マーケットプレイス検索フィールド）、`strict`（マニフェスト検証の強制設定）、`commands`（コマンドマークダウンファイルパス配列）\n- `mcp_servers`は公式仕様では`mcpServers`（キャメルケース）と記載されています\n\n表を公式仕様に完全に合わせることで、開発者の参考価値が向上します。"
    }
  ],
  "skipped_comments": [
    {
      "reason": "コードブロック言語指定のみの重複指摘（76行目）",
      "comment_preview": "Markdownlint-cli2により70以上の箇所でMD040エラーが報告されています..."
    },
    {
      "reason": "コードブロック言語指定のみの重複指摘（115行目）",
      "comment_preview": "ディレクトリツリーの表示は`tree`形式またはプレーンテキストですが..."
    },
    {
      "reason": "コードブロック言語指定のみの重複指摘（149行目）",
      "comment_preview": "markdownlint（MD040）に対応するため、ツリー構造表示にも言語指定を追加してください..."
    },
    {
      "reason": "コードブロック言語指定のみの重複指摘（158行目）",
      "comment_preview": "markdownlint（MD040）に対応するため、ツリー構造表示にも言語指定を追加してください..."
    },
    {
      "reason": "コードブロック言語指定のみの重複指摘（174行目）",
      "comment_preview": "markdownlint（MD040）に対応するため、ツリー構造表示にも言語指定を追加してください..."
    },
    {
      "reason": "コードブロック言語指定のみの重複指摘（193行目）",
      "comment_preview": "markdownlint（MD040）に対応するため、依存方向図を示すコードブロックに言語指定を追加してください..."
    },
    {
      "reason": "未解決のレビュースレッド",
      "comment_preview": "マークダウン: ベアURLをリンク形式に変更してください..."
    },
    {
      "reason": "未解決のレビュースレッド",
      "comment_preview": "マークダウン形式: コード言語指定とベアURL の修正が必要です..."
    },
    {
      "reason": "未解決のレビュースレッド",
      "comment_preview": "cc-sdd インストール手順が欠落しており、ワークフロー内の /kiro: コマンドが未定義です..."
    },
    {
      "reason": "未解決のレビュースレッド（isResolved = false）",
      "comment_preview": "既存のhooks設定が上書きされる可能性があります - Line 101の`jq`マージ処理（`.[0] * .[1]`）は浅いマージであり、既存の`hooks`設定全体を新しい設定で置き換えます..."
    }
  ]
}
